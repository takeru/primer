<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Primer Test</title>
    <script type="text/javascript" src="../prototype-1.6.0.3.js"></script>
    <script type="text/javascript" src="../jquery-1.3.2.js"     ></script>
    <script type="text/javascript">
      jQuery.noConflict()
      $j = jQuery
      $p = $
    </script>
    <script type="text/javascript" src="../excanvas_r3.compiled.js"></script>
    <script type="text/javascript" src="../primer.js"           ></script>

    <script type="text/javascript">
      jQuery(function() {
        var p1 = new Primer({container:"#div1", debug:true})

        drawZero = function(ctx, color){
//log("drawZero")
          ctx.strokeStyle = color
          ctx.lineWidth = 1
          ctx.beginPath()
          ctx.moveTo(0, -20)
          ctx.lineTo(0, +20)
          ctx.moveTo(-20, 0)
          ctx.lineTo(+20, 0)
          ctx.stroke()
ctx.strokeStyle = "#ffffff"
        }

        //----------------------------------
        var blue = p1.root.createChild({name:"blue", x:40, y:40,
          draw: function(ctx){
            drawZero(ctx, "#0000ff")
            ctx.fillStyle = "#0000FF"
            ctx.fillRect(0, 0, 50, 50, "hit=rectBlue")
          }
        })

        //----------------------------------
        var red = p1.root.createChild({name:"red", x:70, y:10,
          draw: function(ctx){
            drawZero(ctx, "#ff0000")
            ctx.fillStyle = "#FF0000"
            ctx.fillRect(10, 10, 30, 50, "hit=rectRed")
          }
        })

        //----------------------------------
        var green = p1.root.createChild({name:"green", x:10, y:60, fillStyle:"#008800",
          draw: function(ctx){
            drawZero(ctx, "#008800")
            ctx.fillStyle = this.fillStyle
            ctx.fillRect(0, 0, 5+blue.y/2, 10+orange.x/10, "hit=rectGreen")
          }
        })

        //----------------------------------
        var black = p1.root.createChild({name:"black", x:5, y:5, visible:false,
          draw: function(ctx){
            ctx.fillStyle = "#000000"
            ctx.fillRect(0, 0, 30, 10+blue.y, "hit=rectBlack")
            //ctx.strokeRect(0, 0, 10+blue.y, 30)
          }
        })

        //----------------------------------
        var text = p1.root.createChild({name:"text", x:60, y:60,
          draw: function(ctx){
            drawZero(ctx, "#000000")
            ctx.fillText("hello? 123 456 789 abc def", 20, 20, 50, "", "hit=text")
          }
        })

        //----------------------------------
        var orange = blue.createChild({name:"orange", x:30, y:0, fillStyle:"#FF8800",
          draw: function(ctx){
            drawZero(ctx, "#ff8800")
            ctx.lineWidth = 4
            ctx.strokeStyle = "#00FF00"
            ctx.fillStyle = this.fillStyle
            ctx.beginPath()
            ctx.moveTo( 0,  0)
            ctx.lineTo(40,  0)
            ctx.lineTo( 0, 40)
            ctx.fill("hit=fillOrange")
            ctx.stroke()
          },
          mouseover: function(){
            black.visible = true
            orange.fillStyle = "#FF4400"
            green.fillStyle  = "#00FF00"
            p1.redraw()
          },
          mouseout: function(){
            black.visible = false
            orange.fillStyle = "#FF8800"
            green.fillStyle  = "#008800"
            p1.redraw()
          },
        })

        //----------------------------------
        var yellow = orange.createChild({name:"yellow", x:-40, y:80,
          draw: function(ctx){
            drawZero(ctx, "#FFFF00")
            ctx.fillStyle = "#FFFF00"
            ctx.fillRect(0, 0, 20, 20, "hit=rectYellow")
          },
        })

        //----------------------------------
        var dx = 1;
        var dy = 1;
        function go() {
          orange.x += dx
          if(orange.x<=-30){ dx = +3; }
          if(300<=orange.x){ dx = -2; }

          blue.y += dy
          if(blue.y<=0){  dy = +1; }
          if(30<=blue.y){ dy = -2; }

          text.x = orange.x*2
          text.y = 70-blue.y

          p1.redraw();
        }

        setInterval(go, 150)
        p1.redraw();
      })
    </script>
  </head>

  <body>
    <p>Testing</p>
    <div style="border:5px #333333 solid;">
      <div id="div1" style="width:400px; height:400px; border:5px gray solid;"></div>
    </div>
  </body>
</html>
